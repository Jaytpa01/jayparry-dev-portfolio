---
import type { GetStaticPathsOptions, Page } from "astro";
import { getCollection, type CollectionEntry } from "astro:content";
import BaseLayout from "@layouts/BaseLayout.astro";
import Card from "@components/Card.astro";
import Pagination from "@components/Pagination.astro";

export async function getStaticPaths({ paginate }: GetStaticPathsOptions) {
	const projects = await getCollection("project");
	return paginate(projects, { pageSize: 5 });
}

interface Props {
	page: Page<CollectionEntry<"project">>;
}

const { page } = Astro.props;
const { next } = page.url;
---

<BaseLayout title="Projects | Jay Parry">
	<section class="pt-6">
		<div class="space-y-6">
			{
				page.data.map((p) => (
					<Card
						title={p.data.title}
						to={`/projects/${p.slug}`}
						content={p.data.description}
						image={p.data.image}
					/>
				))
			}
		</div>
	</section>

	<div class="pt-8 text-center">
		<Pagination {page} />
	</div>
</BaseLayout>
